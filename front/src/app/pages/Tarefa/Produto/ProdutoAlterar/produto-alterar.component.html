<div class="container">
    <h2>Alterar Produto</h2>

    <div *ngIf="mensagemSucesso" class="mensagem-sucesso">{{ mensagemSucesso }}</div>
    <div *ngIf="mensagemErro" class="mensagem-erro">{{ mensagemErro }}</div>

    <form [formGroup]="produtoForm" (ngSubmit)="atualizarProduto()">
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" formControlName="nome" required>
        </div>

        <div class="form-group">
            <label for="descricao">Descrição:</label>
            <textarea id="descricao" formControlName="descricao" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label for="preco">Preço:</label>
            <input type="number" id="preco" formControlName="preco" min="1" required>
        </div>

        <div class="form-group">
            <label for="quantidadeEstoque">Quantidade em Estoque:</label>
            <input type="number" id="quantidadeEstoque" formControlName="quantidadeEstoque" min="1" required>
        </div>

        <div class="form-group">
            <label for="dataValidade">Data de Validade:</label>
            <input type="date" id="dataValidade" formControlName="dataValidade" required>
        </div>

        <div class="form-group">
            <label for="idCategoria">Categoria:</label>
            <select id="idCategoria" formControlName="idCategoria"
                (change)="carregarFornecedores(produtoForm.get('idCategoria')?.value)">
                <option value="">Selecione uma categoria</option>
                <option *ngFor="let categoria of categorias" [value]="categoria.id">
                    {{ categoria.nome }}
                </option>
            </select>
        </div>

        <div class="form-group">
            <label for="idFornecedor">Fornecedor:</label>
            <select id="idFornecedor" formControlName="idFornecedor">
                <option value="">Selecione um fornecedor</option>
                <option *ngFor="let fornecedor of fornecedores" [value]="fornecedor.id">
                    {{ fornecedor.id }} - {{ fornecedor.nome }} - {{ fornecedor.cnpj }}
                </option>
            </select>
        </div>

        <button type="submit">Atualizar</button>
    </form>
</div>